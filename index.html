<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BizAnalyzer Pro - AIé§†å‹•ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ©ãƒ³åˆ†æ</title>
  <style>
    /* ã‚ãªãŸã®å…ƒã®CSSãã®ã¾ã¾åæ˜ æ¸ˆã¿ */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
      min-height: 100vh;
      color: #333;
    }
    .header { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); padding: 20px 0; box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1); }
    .header-content { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: flex; align-items: center; justify-content: space-between; }
    .logo { display: flex; align-items: center; gap: 12px; }
    .logo-icon { width: 40px; height: 40px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px; color: white; }
    .logo h1 { font-size: 24px; font-weight: 700; background: linear-gradient(135deg, #1e3c72, #2a5298); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .tagline { font-size: 12px; color: #666; margin-top: 2px; }
    .container { max-width: 1200px; margin: 40px auto; padding: 0 20px; }
    .hero { text-align: center; margin-bottom: 50px; color: white; }
    .hero h2 { font-size: 42px; font-weight: 800; margin-bottom: 15px; line-height: 1.2; }
    .hero p { font-size: 18px; opacity: 0.9; max-width: 600px; margin: 0 auto; }
    .main-content { background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1); overflow: hidden; }
    .form-section { padding: 40px; background: linear-gradient(135deg, #f8f9ff, #ffffff); }
    .section-title { font-size: 24px; font-weight: 700; margin-bottom: 10px; color: #1e3c72; display: flex; align-items: center; gap: 10px; }
    .section-subtitle { color: #666; margin-bottom: 30px; font-size: 16px; }
    .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-bottom: 30px; }
    .form-group { display: flex; flex-direction: column; }
    .form-group label { font-weight: 600; margin-bottom: 8px; color: #333; font-size: 14px; }
    .form-group input, .form-group select, .form-group textarea {
      padding: 12px 16px;
      border: 2px solid #e1e8ed;
      border-radius: 12px;
      font-size: 14px;
      transition: all 0.3s ease;
      background: white;
    }
    .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    .form-group textarea { min-height: 120px; resize: vertical; font-family: inherit; }
    .wide { grid-column: 1 / -1; }
    .analyze-button {
      width: 100%;
      padding: 18px 32px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    .analyze-button:disabled { opacity: 0.7; cursor: not-allowed; transform: none; }
    .results-section { padding: 40px; border-top: 1px solid #e1e8ed; background: #fafbfc; display: none; }
    .results-section.active { display: block; animation: fadeInUp 0.5s ease; }
    .result-card { background: white; border-radius: 16px; padding: 30px; margin-bottom: 25px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); border-left: 4px solid #667eea; }
    .result-title { font-size: 20px; font-weight: 700; color: #1e3c72; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
    .result-content { color: #4a5568; line-height: 1.7; font-size: 15px; }
    .loading { display: inline-flex; align-items: center; gap: 10px; }
    .spinner { width: 20px; height: 20px; border: 2px solid transparent; border-top: 2px solid white; border-radius: 50%; animation: spin 1s linear infinite; }
    .error-message { background: linear-gradient(135deg, #fee, #fdd); color: #c53030; padding: 16px 20px; border-radius: 12px; margin-bottom: 20px; border-left: 4px solid #e53e3e; display: none; }
    .error-message.active { display: block; animation: fadeIn 0.3s ease; }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
  </style>
</head>
<body>
  <!-- ä»¥ä¸‹çœç•¥ï¼šãƒ•ã‚©ãƒ¼ãƒ ã‚„ .hero .features ãªã©å…ƒã®ã¾ã¾ -->

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      class BizAnalyzer {
        constructor() {
          this.form = document.getElementById('analysisForm');
          if (!this.form) {
            console.error('ãƒ•ã‚©ãƒ¼ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“'); return;
          }
          this.button = document.getElementById('analyzeButton');
          this.buttonText = document.getElementById('buttonText');
          this.resultsSection = document.getElementById('resultsSection');
          this.resultsContainer = document.getElementById('analysisResults');
          this.errorMessage = document.getElementById('errorMessage');
          this.form.addEventListener('submit', (e) => {
            e.preventDefault();
            this.analyzeBusinessPlan();
          });
        }
        async analyzeBusinessPlan() {
          const data = Object.fromEntries(new FormData(this.form).entries());
          this.setLoading(true); this.hideError();
          try {
            const res = await fetch('/api/analyze', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(data)
            });
            const result = await res.json();
            if (!result.analysis) throw new Error('APIã‹ã‚‰ã®responseã«analysisãŒã‚ã‚Šã¾ã›ã‚“');
            this.displayResults(result.analysis, data);
          } catch (err) {
            this.showError('åˆ†æä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + err.message);
          } finally { this.setLoading(false); }
        }
        displayResults(analysis, data) {
          const sections = analysis.split(/(?=ã€[^ã€‘]+ã€‘)/).map(block => {
            const match = block.match(/ã€([^ã€‘]+)ã€‘([\s\S]*)/);
            return match ? { title: match[1], content: match[2].trim() } : null;
          }).filter(Boolean);
          this.resultsContainer.innerHTML = sections.map((s, i) => `
            <div class="result-card">
              <div class="result-title">${['ğŸ¯','ğŸ’¼','ğŸ“¢','ğŸ’°','âš ï¸','ğŸš€'][i] || 'ğŸ“Š'} ${s.title}</div>
              <div class="result-content">${s.content.replace(/\n/g, '<br>')}</div>
            </div>`).join('');
          this.resultsSection.classList.add('active');
          this.resultsSection.scrollIntoView({ behavior: 'smooth' });
        }
        setLoading(loading) {
          this.button.disabled = loading;
          this.buttonText.innerHTML = loading ? '<div class="loading"><div class="spinner"></div>AIåˆ†æä¸­...</div>' : 'ğŸ” AIåˆ†æã‚’é–‹å§‹';
        }
        showError(msg) {
          this.errorMessage.textContent = msg;
          this.errorMessage.classList.add('active');
          this.errorMessage.scrollIntoView({ behavior: 'smooth' });
        }
        hideError() {
          this.errorMessage.classList.remove('active');
        }
      }
      new BizAnalyzer();
    });
  </script>
</body>
</html>
